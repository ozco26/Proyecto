<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<body>
  <% var mostrarMensaje ; %>
  <% var popupMessage %>
    <div class="container mt-4">
        <div class="card border-secundary">
      
          <div class="card-header">Nuevo Usuario</div>
          <div class="card-body">
      
            <form id="formUserCU" action="/saveReg" method="POST">
      
              <div class="mb-3">
                <label for="Cedula" class="form-label">Cedula</label>
                <input type="text" class="form-control" id="Cedula" name="Cedula" tabindex="1" >
              </div>
              <div class="mb-3">
                <label for="Nombre" class="form-label">Nombre</label>
                <input type="text" class="form-control" id="Nombre" name="Nombre" tabindex="2" >
              </div>
              <div class="mb-3">
                <label for="Apellidos" class="form-label">Apellidos</label>
                <input type="text" class="form-control" id="Apellidos" name="Apellidos" tabindex="3" >
              </div>
              <div class="mb-3">
                <label for="FechaNacimiento" class="form-label">Fecha de Nacimiento</label>
                <input type="date" class="form-control" id="FechaNacimiento" name="FechaNacimiento"  tabindex="4">
              </div>
              <div class="mb-3">
                <label for="Correo" class="form-label">Correo</label>
                <input type="email" class="form-control" id="Correo" name="Correo" tabindex="5" >
              </div>
              <div class="mb-3">
                <label for="Contrasena" class="form-label">Contraseña</label>
                <input type="password" class="form-control" id="Contrasena" name="Contrasena" tabindex="6" >
              </div>

              <input type="hidden" id="rol" name="rol" value="2">     
      
              </div>
              <button type="submit" class="btn btn-primary" tabindex="5">Guardar</button>
              <a href="/" class="btn btn-secundary">Cancelar</a>
            </form>
          </div>

    <div id="oculto" style{"<%= mostrarMensaje ? 'display: block;' : 'display: none;' %>"}></div>

</body>

<script>
  document.getElementById('formUserCU').addEventListener('submit', function (event) {
    event.preventDefault();
    var pendiente;

    if (validateForm()) {
      this.submit();
    } else {
      // Utiliza SweetAlert en lugar de alert
      Swal.fire({
        icon: 'error',
        title: 'Oops... información pendiente ',
        text: 'Por favor, complete todos los campos del formulario.',
      });
    }
  });

  function validateForm() {
      var cedula = document.getElementById('Cedula').value;
      var nombre = document.getElementById('Nombre').value;
      var apellidos = document.getElementById('Apellidos').value;
      var fechaNacimiento = document.getElementById('FechaNacimiento').value;
      var correo = document.getElementById('Correo').value;
      var contrasena = document.getElementById('Contrasena').value;

      if (cedula === '' || nombre === '' || apellidos === '' || fechaNacimiento === '' || correo === '' || contrasena === '') {
        return false;
      } else {
      return true;}
  }
  </script>
    <script>
      // Utiliza el mensaje enviado desde el servidor para mostrar el SweetAlert
      document.addEventListener('DOMContentLoaded', function() {
          const mensaje = "<%= popupMessage %>";
          if (mensaje) {
              Swal.fire({
                  icon: 'error',
                  title: 'Error',
                  text: mensaje
              });
          }
      });
  </script>

</html>